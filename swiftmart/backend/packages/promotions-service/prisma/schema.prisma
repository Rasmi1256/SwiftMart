generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  
}

//
// =========================
// ENUMS
// =========================
//

enum DiscountType {
  percentage
  fixed_amount
}

enum CouponScope {
  all
  category
  product
}

//
// =========================
// COUPON MODEL
// =========================
//

model Coupon {
  id                  String        @id @default(uuid()) @db.Uuid
  code                String        @unique
  description         String
  discountType        DiscountType
  discountValue       Float         // Must be â‰¥ 0
  minimumOrderAmount  Float         @default(0)
  maxUses             Int           @default(999999999) // Infinity replaced with large number
  usesCount           Int           @default(0)
  validFrom           DateTime      @default(now())
  validUntil          DateTime
  isActive            Boolean       @default(true)

  applicableTo        CouponScope   @default(all)
  applicableId        String?       // Optional: categoryId or productId depending on scope

  createdAt           DateTime      @default(now())
  updatedAt           DateTime      @updatedAt

  @@map("coupons")
}
